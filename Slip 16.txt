Q.2
 A)Write a C program that catches the ctrl-c (SIGINT) signal for the first time and display the appropriate message and exits on pressing ctrl-c again.

#include "stdio.h" 
#include "stdlib.h"
 #include "fcntl.h" 
#include "signal.h"
 void sh(int sig) {
 printf("\n SIGINT signal cought");
 signal(SIGINT,SIG_DFL);
 fflush(stdout); }
 int main() { 
signal(SIGINT,sh);
 while(1) { }
 return 0; } 

/* OUTPUT: [fy@localhost ~]$ gedit signal.c
 [fy@localhost ~]$ gcc signal.c
 [fy@localhost ~]$ ./a.out
 ^C
 SIGINT signal cought */


B) Write a C program to implement the following unix/linux command on current directory
ls –l > output.txt
DO NOT simply exec ls -l > output.txt or system command from the program.

#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <stdlib.h>
int main()
{
int pid; //process id
pid = fork(); //create another process
if ( pid < 0 )
{ //fail
printf(“\nFork failed\n”);
exit (-1);
}
else if ( pid == 0 )
{ //child
execlp ( “/bin/ls”, “ls”, “-l”, NULL ); //execute ls
}
else
{ //parent
wait (NULL); //wait for child
printf(“\nchild complete\n”);
exit (0);
}
}

/* Output:
guest-glcbIs@ubuntu:~$gcc –o lsc.out lsc.c
guest-glcbIs@ubuntu:~$./lsc.out
total 100
-rwxrwx—x 1 guest-glcbls guest-glcbls 140 2012-07-06 14:55 f1
drwxrwxr-x 4 guest-glcbls guest-glcbls 140 2012-07-06 14:40 dir1
child complete */