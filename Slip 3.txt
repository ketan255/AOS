Q.2
 A)Write a C program to find file properties such as inode number, number of hard link, File permissions, File size, File access and modification time and so on of a given file using stat() system call.

#include"stdio.h"
#include"unistd.h"
#include"fcntl.h"
#include"sys/stat.h"
#include"sys/types.h"
#include"time.h"
int main()
{
char fn[100];
char *s;
int fd;
struct stat s1;
printf("Enter file name=");
scanf("%s",fn);
stat(fn,&s1);
printf("File name=%s\n",fn);
printf("Inod number=%d\n",s1.st_ino);
printf("number of hard link= %d\n",s1.st_nlink);
printf("File size =%d\n",s1.st_size);
printf("file Permision=");
if(S_IRUSR & s1.st_mode)
printf("Read");
else
printf("-------");
if(S_IWUSR & s1.st_mode)
printf("Write");
else
printf("-------");
if(S_IXUSR & s1.st_mode)
printf("Exicute");
else
printf("-------");
//group of file
if(S_IRGRP & s1.st_mode)
printf("Read");
else
printf("-------");
if(S_IWGRP & s1.st_mode)
printf("Write");
else
printf("-------");
if(S_IXGRP & s1.st_mode)
printf("Exicute");
else
printf("-------");
if(S_IROTH & s1.st_mode)
printf("Read");
else
printf("-------");
if(S_IWOTH & s1.st_mode)
printf("Write");
else
printf("-------");
if(S_IXOTH & s1.st_mode)
printf("Exicute");
else
printf("-------");
printf("\n");
s=ctime(&s1.st_atime);
printf("File access time =%s\n",s);
s=ctime(&s1.st_mtime);
printf("File modification time =%s\n",s);
return 0
}


B) Write a C program to create ‘n’ child processes. When all ‘n’ child processes terminates, Display total cumulative time children spent in user and kernel mode.

#include<stdio.h>
#include<sys/times.h>
#include<stdlib.h>
#include<unistd.h>
static void pr_times(clock_t real,struct tms *tmsstart,struct tms *tmsend)
{
  static long clktck = 0;
  if(clktck == 0)
  if((clktck = sysconf(_SC_CLK_TCK))<0)
      printf("sysconf error");
  printf("%ld\n",clktck);
  printf("real=%7.2f\n",(real/(double)clktck));
  printf("CU END=%7.2f\n",tmsend->tms_cutime);
  printf("CU START=%7.2f\n",tmsstart->tms_cutime);
  printf("Cs END=%7.2f\n",tmsend->tms_cstime);
  printf("Cs START=%7.2f\n",tmsstart->tms_cstime);
  printf("Child spent %7.2f time in user mode\n",(tmsend->tms_cutime-tmsstart->tms_cutime)/(double)clktck);
  printf("Child spent %7.2f time in kernel mode\n",(tmsend->tms_cstime-tmsstart->tms_cstime)/(double)clktck);
}
 int main()
{
  int n,i;
  printf("How many children processes:-");
  scanf("%d",&n);
  for(i=0;i<n;i++)
  {
       struct tms tmsstart,tmsend;
       clock_t start,end;
       if(fork()==0)
       {
         if((start == times(&tmsstart))==-1)
            printf("time error");
         if((end == times(&tmsend))==-1)
            printf("time error");

	 static long clktck=0;
	 if(clktck == 0)
  	 if((clktck = sysconf(_SC_CLK_TCK))<0)
      	 	printf("sysconf error");
      	 printf("[child %d]pid %d from [parent]pid %d\n",i,getpid(),getppid());
      	 printf("User CPU time,END=%7.2f\n",&tmsend.tms_cutime);
      	 printf("User CPU time,START=%7.2f\n",&tmsstart.tms_cutime);
      	 printf("System(Kernel)CPU time,END=%7.2f\n",&tmsend.tms_cstime);
     	 printf("System(Kernel)CPU time,START=%7.2f\n",&tmsstart.tms_cstime);
     	 printf("Child spent %7.2f time in user mode\n",(tmsend.tms_cutime-tmsstart.tms_cutime)/(double)clktck);
      	 printf("Child spent %7.2f time in kernel mode\n",(tmsend.tms_cstime-tmsstart.tms_cstime)/(double)clktck);
    
      	 exit(0);
      }
 }
 for(i=0;i<n;i++)
 {
   wait(NULL);
 }
}